<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>BDM Awakening Calculator</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel=icon href=images/favicon.png type="image/png" />
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" integrity="sha256-OweaP/Ic6rsV+lysfyS4h+LM6sRwuO3euTYfr6M124g=" crossorigin="anonymous" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.css" integrity="sha256-R91pD48xW+oHbpJYGn5xR0Q7tMhH4xOrWn1QqMRINtA=" crossorigin="anonymous" />
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js" integrity="sha256-U/cHDMTIHCeMcvehBv1xQ052bPSbJtbuiw4QA9cTKz0=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.4/toastr.min.js" integrity="sha256-yNbKY1y6h2rbVcQtf0b8lq4a+xpktyFc3pSYoGAY1qQ=" crossorigin="anonymous"></script>
	<style type="text/css">
		html { 
			background: url(images/background.jpg) no-repeat center center fixed; 
			-webkit-background-size: cover;
			-moz-background-size: cover;
			-o-background-size: cover;
			background-size: cover;
		}
		.select-dropdown{
			color: #26a69a;
			text-align: center;
		}
		.dropdown-content li>a, .dropdown-content li>span {
			text-align: center;
		}
		.select-wrapper{
			background: #fafafa;
		}
		.dialog-ovelay {
		    position: absolute;
		    top: 0;
		    left: 0;
		    right: 0;
		    bottom: 0;
		    background-color: rgba(0, 0, 0, 0.50);
		    z-index: 999999
		}
		.dialog-ovelay .dialog {
		    width: 600px;
		    margin: 100px auto 0;
		    background-color: #fff;
		    box-shadow: 0 0 20px rgba(0,0,0,.2);
		    border-radius: 3px;
		    overflow: hidden
		}
		.dialog-ovelay .dialog header {
		    padding: 10px 8px;
		    background-color: #f6f7f9;
		    border-bottom: 1px solid #e5e5e5;
		    text-align: center;
		}
		.dialog-ovelay .dialog header h3 {
		    font-size: 14px;
		    margin: 0;
		    color: #555;
		    display: inline-block
		}
		.dialog-ovelay .dialog header .fa-close {
		    float: right;
		    color: #c4c5c7;
		    cursor: pointer;
		    transition: all .5s ease;
		    padding: 0 2px;
		    border-radius: 1px    
		}
		.dialog-ovelay .dialog header .fa-close:hover {
		    color: #b9b9b9
		}
		.dialog-ovelay .dialog header .fa-close:active {
		    box-shadow: 0 0 5px #673AB7;
		    color: #a2a2a2
		}
		.dialog-ovelay .dialog .dialog-msg {
		    padding: 12px 10px
		}
		.dialog-ovelay .dialog .dialog-msg p{
		    margin: 0;
		    font-size: 15px;
		    color: #333;
		    text-align: center;
		}
		.dialog-ovelay .dialog footer {
		    border-top: 1px solid #e5e5e5;
		    padding: 8px 10px
		}
		.dialog-ovelay .dialog footer .controls {
		    text-align: center;
		}
		.dialog-ovelay .dialog footer .controls .button {
		    padding: 5px 15px;
		    border-radius: 3px
		}
		.button {
		  cursor: pointer
		}
		.button-default {
		    background-color: rgb(248, 248, 248);
		    border: 1px solid rgba(204, 204, 204, 0.5);
		    color: #5D5D5D;
		}
		.button-danger {
		    background-color: #f44336;
		    border: 1px solid #d32f2f;
		    color: #f5f5f5
		}
		.link {
		  padding: 5px 10px;
		  cursor: pointer
		}
	</style>
</head>
<body>
	<nav class="grey darken-4" role="navigation">
		<div class="nav-wrapper container">
			<a id="logo-container" href="index.html" class="brand-logo show-on-medium-and-up">Awakening Enhancement</a>
			<ul class="right">
				<li><a href="http://www.zeusafk.net">by DeadEnd</a></li>
			</ul>
		</div>
	</nav>
	<div class="container">
		<div class="row">
			<div class="col s12">
				<div class="z-depth-5" style="padding: 0.2em;">
					<div class="row">
						<div class="col m8" style="background-color: rgba(0,0,0,0.8); padding: 1em;">
							<div class="row" style="margin-bottom: 0;">
								<div class="col m6">
						          <div class="row valign-wrapper" style="margin-bottom: 0;">
						            <div class="col s2">
						              <img src="images/pristine_weapon.png" alt="" class="circle responsive-img"/>
						            </div>
						            <div class="col s10">
						            	<span style="color: #e0311f; font-weight: bold;">Pristine Black Crystal: Weapon</span>
						            	<div class="input-field col s6">
											<input placeholder="Enter an amount" id="pristine_weapon" type="number" value="5" style="color: #fafafa; height: 2rem;">
										</div>
						            </div>
						          </div>
							    </div>
							    <div class="col m6">
						          <div class="row valign-wrapper" style="margin-bottom: 0;">
						            <div class="col s2">
						              <img src="images/pristine_armor.png" alt="" class="circle responsive-img"/>
						            </div>
						            <div class="col s10">
										<span style="color: #e0311f; font-weight: bold;">Pristine Black Crystal: Armor</span>
										<div class="input-field col s6">
											<input placeholder="Enter an amount" id="pristine_armor" type="number" value="5" style="color: #fafafa; height: 2rem;">
										</div>
						            </div>
						          </div>
							    </div>
							</div>
							<div class="row" style="margin-bottom: 0;">
								<div class="col m6">
						          <div class="row valign-wrapper" style="margin-bottom: 0;">
						            <div class="col s2">
						              <img src="images/advice_valks_10.png" alt="" class="responsive-img"/>
						            </div>
						            <div class="col s10">
						            	<span style="color: #e0311f; font-weight: bold;">Advice of Valks (+10%)</span>
						            	<div class="input-field col s6">
											<input placeholder="Enter an amount" id="advice_valks_10" type="number" value="5" style="color: #fafafa; height: 2rem;">
										</div>
						            </div>
						          </div>
							    </div>
							    <div class="col m6">
						          <div class="row valign-wrapper" style="margin-bottom: 0;">
						            <div class="col s2">
						              <img src="images/advice_valks_50.png" alt="" class="responsive-img"/>
						            </div>
						            <div class="col s10">
						            	<span style="color: #e0311f; font-weight: bold;">Advice of Valks (+50%)</span>
						            	<div class="input-field col s6">
											<input placeholder="Enter an amount" id="advice_valks_50" type="number" value="5" style="color: #fafafa; height: 2rem;">
										</div>
						            </div>
						          </div>
							    </div>
							</div>
							<div class="row">
								<div class="col m6">
						          <div class="row valign-wrapper" style="margin-bottom: 0;">
						            <div class="col s2">
						              <img src="images/silver_money.png" alt="" class="responsive-img"/>
						            </div>
						            <div class="col s10">
						            	<span style="color: #e0311f; font-weight: bold;">Silver money available</span>
						            	<div class="input-field col s6">
											<input placeholder="Enter an amount" id="silver" type="number" value="50000000" style="color: #fafafa; height: 2rem;">
										</div>
						            </div>
						          </div>
							    </div>
								<div class="col m6">
						          <div class="row valign-wrapper" style="margin-bottom: 0;">
						            <div class="col s2">
						              <img src="images/restoration_scroll.png" alt="" class="responsive-img"/>
						            </div>
						            <div class="col s10">
						            	<span style="color: #e0311f; font-weight: bold;">Restoration Scrolls &nbsp;&nbsp;</span>
						            	<div class="input-field col s6">
											<input placeholder="Enter an amount" id="restoration_scrolls" type="number" value="1000" style="color: #fafafa; height: 2rem;">
										</div>
						            </div>
						          </div>
							    </div>
							</div>
							<div class="row">
								<div class="col-s12 center-align">
									<p style="color: #e0311f; font-weight: bold;">Adittional Success Rate</p>
									<label>
										<input type="radio" name="advice_valks" class="with-gap" value="0" checked="checked" />
										<span class="grey-text text-lighten-5">None &nbsp;&nbsp;&nbsp;</span>
									</label>
									<label>
										<input type="radio" name="advice_valks" class="with-gap" value="10" />
										<span class="grey-text text-lighten-5">Advice of the Valks (+10%) &nbsp;&nbsp;&nbsp;</span>
									</label>
									<label>
										<input type="radio" name="advice_valks" class="with-gap" value="50" />
										<span class="grey-text text-lighten-5">Advice of the Valks (+50%)</span>
									</label>
									<br/>
									<p style="color: #e0311f; font-weight: bold;">Item Type</p>
									<label>
										<input type="radio" name="type" class="with-gap" value="weapon" checked="checked" />
										<span class="grey-text text-lighten-5">Weapon</span>
									</label>
									<label>
										<input type="radio" name="type" class="with-gap" value="armor" />
										<span class="grey-text text-lighten-5">Armor</span>
									</label>
									<br/>
									<p style="color: #e0311f; font-weight: bold; margin-bottom: 0;">Item Level</p>
									<div class="input-field col s6 offset-s3 center-align">
										<select id="level" name="level" class="icons" style="color: #fafafa;">
											<option value="0" data-icon="images/0.png" selected=>+40</option>
											<option value="1" data-icon="images/I.png">PRI: I</option>
											<option value="2" data-icon="images/II.png">DUO: II</option>
											<option value="3" data-icon="images/III.png">TRI: III</option>
											<option value="4" data-icon="images/IV.png">TET: IV</option>
											<option value="5" data-icon="images/V.png">PEN: V</option>
											<option value="6" data-icon="images/VI.png">HEX: VI</option>
											<option value="7" data-icon="images/VII.png">HEP: VII</option>
											<option value="8" data-icon="images/VIII.png">OCT: VIII</option>
											<option value="9" data-icon="images/IX.png">NONA: IX</option>
											<option value="10" data-icon="images/X.png">DEC: X</option>
										</select>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col s12 center-align">
									<a id='attempt' class="waves-effect waves-light btn red accent-4 pulse" onclick="AttemptAwakening()"><i class="material-icons">whatshot</i> 1 <i class="material-icons">attach_money</i>5,000,000  Attempt Awakening</a>
								</div>
							</div>
						</div>
						<div class="col m4">
							<h5 class="grey-text text-lighten-4">Success Rate</h5>
							<table class="centered highlight striped grey lighten-4">
								<thead>
									<tr>
										<th>Level</th>
										<th>None</th>
										<th>Valks 10%</th>
										<th>Valks 50%</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>I</td>
										<td>75%</td>
										<td>82.5%</td>
										<td>100%</td>
									</tr>
									<tr>
										<td>II</td>
										<td>60%</td>
										<td>66%</td>
										<td>90%</td>
									</tr>
									<tr>
										<td>III</td>
										<td>40%</td>
										<td>44%</td>
										<td>60%</td>
									</tr>
									<tr>
										<td>IV</td>
										<td>20%</td>
										<td>22%</td>
										<td>30%</td>
									</tr>
									<tr>
										<td>V</td>
										<td>10%</td>
										<td>11%</td>
										<td>15%</td>
									</tr>
									<tr>
										<td>VI</td>
										<td>5%</td>
										<td>5.5%</td>
										<td>7.5%</td>
									</tr>
									<tr>
										<td>VII</td>
										<td>2.5%</td>
										<td>2.75%</td>
										<td>3.5%</td>
									</tr>
									<tr>
										<td>VIII</td>
										<td>1.25%</td>
										<td>1.375%</td>
										<td>1.75%</td>
									</tr>
									<tr>
										<td>IV</td>
										<td>0.625%</td>
										<td>0.6875%</td>
										<td>0.875%</td>
									</tr>
									<tr>
										<td>X</td>
										<td>0.3125%</td>
										<td>0.34375%</td>
										<td>0.4375%</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<p class="center-align" style="border-top: 1px solid #c89b3c; padding: 0.5em; color: #fafafa;">
		This website isn’t endorsed by Pearl Abyss and doesn’t reflect the views or opinions of Pearl Abyss or anyone officially involved in producing or managing Black Desert Mobile.
		<br/>
		Black Desert Mobile and Pearl Abyss are trademarks or registered trademarks of Pearl Abyss, Corp.
		<br/>
		Black Desert Mobile © Pearl Abyss, Corp.
		<br/>
		This website isn't endorsed by Pearl Abyss, Corp. and has no commercial purpose.
		<br/>
		<span class="copyright">©2020 ZeusAFK Technologies</span>
	</p>
	<script type="text/javascript">
		var instances;

		document.addEventListener('DOMContentLoaded', function() {
			var elems = document.querySelectorAll('select');
			instances = M.FormSelect.init(elems);
		});

		toastr.options = {
			"closeButton": false,
			"debug": false,
			"newestOnTop": false,
			"progressBar": false,
			"positionClass": "toast-bottom-full-width",
			"preventDuplicates": false,
			"onclick": null,
			"showDuration": "300",
			"hideDuration": "1000",
			"timeOut": "2000",
			"extendedTimeOut": "1000",
			"showEasing": "linear",
			"hideEasing": "linear",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		}

		var enhancement_chance = {
			1: 75,
			2: 60,
			3: 40,
			4: 20,
			5: 10,
			6: 5,
			7: 2.5,
			8: 1.25,
			9: 0.625,
			10: 0.3125
		};

		var item_labels = {
			0: '+40',
			1: 'PRI',
			2: 'DUO',
			3: 'TRI',
			4: 'TET',
			5: 'PEN',
			6: 'HEX',
			7: 'HEP',
			8: 'OCT',
			9: 'NON',
			10: 'DEC'
		};

		var valks_10 = 0;
		var valks_50 = 0;
		var restoration_scrolls = 0;
		var silver = 0;
		var level = 0;
		var pristine_weapon = 0;
		var pristine_armor = 0;
		var type = 'weapon';
		var advice_valks = 0;

		function AttemptAwakening(){
			valks_10 = $('#advice_valks_10').val();
			valks_50 = $('#advice_valks_50').val();
			restoration_scrolls = $('#restoration_scrolls').val();
			silver = $('#silver').val();
			pristine_weapon = $('#pristine_weapon').val();
			pristine_armor = $('#pristine_armor').val();
			type = $('input[name="type"]:checked').val();
			advice_valks = $('input[name="advice_valks"]:checked').val();
			level = $('#level').val();

			if(type == 'weapon' && pristine_weapon == 0){
				toastr.warning("Not enought Pristine Black Crystal: Weapon");
				return;
			}

			if(type == 'armor' && pristine_armor == 0){
				toastr.warning("Not enought Pristine Black Crystal: Armor");
				return;
			}

			if(silver < 5000000){
				toastr.warning("Not enought silver");
				return;
			}

			if(advice_valks == 10 && valks_10 == 0){
				toastr.warning("Not enought Advice of Valks (10%)");
				return;
			}

			if(advice_valks == 50 && valks_50 == 0){
				toastr.warning("Not enought Advice of Valks (50%)");
				return;
			}

			$('#attempt').fadeOut();
			$.get('https://www.random.org/decimal-fractions/?num=1&dec=7&col=1&format=plain&rnd=new', function(random){
				if(type == 'weapon'){
					$('#pristine_weapon').val(pristine_weapon - 1);
				}else{
					$('#pristine_armor').val(pristine_armor - 1);
				}

				if(advice_valks == 10){
					$('#advice_valks_10').val(valks_10 - 1);
				}else if(advice_valks == 50){
					$('#advice_valks_50').val(valks_50 - 1);
				}

				$('#silver').val(silver - 5000000);

				var result = random * 100;
				var next_level = parseInt(level) + 1;
				var success = enhancement_chance[next_level];

				if(advice_valks > 0){
					success += advice_valks * success / 100;
				}

				if(result <= success){
					toastr.success("Awakening Enhancement Success", "Item level: " + item_labels[next_level]);
					$("#level").val(next_level).trigger('change');
					instances[0].destroy();
					instances = M.FormSelect.init(document.querySelectorAll('select'));
					$('#attempt').fadeIn();
				}else{
					if(level > 0){
						level -= 1;
						$("#level").val(level).trigger('change');
						instances[0].destroy();
						instances = M.FormSelect.init(document.querySelectorAll('select'));

						if(restoration_scrolls >= 200){
							RestoreAsk('Awakened Enhancement Failed', 'Use <b>Restoration Scroll</b> for a <b>50% chance</b> to restore your gear.<br/> Restore item?', 'Restore', 'Cancel');
						}else{
							$('#attempt').fadeIn();
						}
					}else{
						$('#attempt').fadeIn();
					}
					toastr.error("Awakening Enhancement Failed", "Item level: " + item_labels[level]);
				}
			});
		}

		function RestoreAsk(title, msg, $true, $false, $link) {
			var $content =  "<div class='dialog-ovelay'>" +
				"<div class='dialog'><header>" +
				" <h3> " + title + " </h3> " +
				"<i class='fa fa-close'></i>" +
				"</header>" +
				"<div class='dialog-msg'>" +
				" <p> " + msg + " </p> " +
				"</div>" +
				"<footer>" +
				"<div class='controls'>" +
				" <button class='button button-danger doAction'>" + $true + "</button> " +
				" <button class='button button-default cancelAction'>" + $false + "</button> " +
				"</div>" +
				"</footer>" +
				"</div>" +
				"</div>";
			$('body').prepend($content);
			$('.doAction').click(function(){
				$.get('https://www.random.org/integers/?num=1&min=0&max=100&col=1&base=10&format=plain&rnd=new', function(random){
					$('#restoration_scrolls').val(restoration_scrolls - 200);
					if(random >= 50){
						var next_level = parseInt(level) + 1;
						toastr.success("Awakening Enhancement Success", "Item level: " + item_labels[next_level]);
						$("#level").val(next_level).trigger('change');
						instances[0].destroy();
						instances = M.FormSelect.init(document.querySelectorAll('select'));
						$('#attempt').fadeIn();
					}else{
						toastr.error("Awakening Enhancement Failed", "Item level: " + item_labels[level]);
						$('#attempt').fadeIn();
					}
				});
				$(this).parents('.dialog-ovelay').fadeOut(500, function () {
					$(this).remove();
				});
			});
			$('.cancelAction, .fa-close').click(function () {
				$(this).parents('.dialog-ovelay').fadeOut(500, function () {
					$(this).remove();
				});
			});
		}

	</script>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-38205311-6"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-38205311-6');
	</script>

</body>
</html>